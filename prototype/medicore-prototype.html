<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MediCore EMR Pro - Comprehensive Medical Records</title>
    <style>
        /* Professional Medical UI Design */
        :root {
            --primary-color: #0066cc;
            --primary-dark: #004c99;
            --primary-light: #e6f2ff;
            --secondary-color: #2c3e50;
            --success-color: #00b894;
            --danger-color: #d63031;
            --warning-color: #fdcb6e;
            --info-color: #74b9ff;
            --bg-color: #f5f7fa;
            --bg-secondary: #ffffff;
            --border-color: #dfe6e9;
            --text-primary: #2d3436;
            --text-secondary: #636e72;
            --text-light: #b2bec3;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
            --touch-target: 56px;
            --spacing-xs: 8px;
            --spacing-sm: 12px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --border-radius: 12px;
            --border-radius-sm: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text-primary);
            font-size: 16px;
            overflow: hidden;
            line-height: 1.6;
        }

        .app-container {
            display: grid;
            grid-template-columns: 320px 1fr;
            height: 100vh;
            overflow: hidden;
        }

        /* Professional Sidebar */
        .sidebar {
            background: linear-gradient(180deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .sidebar-header {
            padding: var(--spacing-xl) var(--spacing-lg);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--border-radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: var(--shadow-md);
        }

        .sidebar-header h1 {
            font-size: 24px;
            font-weight: 700;
            color: white;
            margin-bottom: 2px;
            letter-spacing: -0.5px;
        }

        .sidebar-header p {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: var(--spacing-lg);
        }

        .sidebar-content::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .sidebar-content::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        /* Main Content */
        .main-content {
            background: var(--bg-color);
            overflow-y: auto;
            padding: var(--spacing-xl);
        }

        .main-content::-webkit-scrollbar {
            width: 8px;
        }

        .main-content::-webkit-scrollbar-track {
            background: var(--bg-color);
        }

        .main-content::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        /* Professional Buttons */
        .btn {
            min-height: var(--touch-target);
            padding: 0 var(--spacing-xl);
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            box-shadow: var(--shadow-sm);
            letter-spacing: 0.3px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #d63031 0%, #e17055 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #fdcb6e 0%, #ffeaa7 100%);
            color: #2d3436;
        }

        .btn-info {
            background: linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%);
            color: white;
        }

        .btn-outline {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            box-shadow: none;
        }

        .btn-outline:hover {
            background: var(--primary-light);
        }

        .btn-block {
            width: 100%;
        }

        .btn-lg {
            min-height: 64px;
            font-size: 18px;
            border-radius: var(--border-radius);
        }

        .btn-sm {
            min-height: 40px;
            padding: 0 var(--spacing-md);
            font-size: 14px;
        }

        /* Professional Input Fields */
        .input-field {
            min-height: 52px;
            padding: var(--spacing-md) var(--spacing-lg);
            font-size: 16px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            width: 100%;
            transition: all 0.3s ease;
            background: white;
            color: var(--text-primary);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px var(--primary-light);
        }

        .input-field::placeholder {
            color: var(--text-light);
        }

        .input-group {
            margin-bottom: var(--spacing-lg);
        }

        .input-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Professional Cards */
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--spacing-lg);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 2px solid var(--border-color);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .stats-card {
            background: white;
            border-radius: var(--border-radius);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-md);
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s ease;
        }

        .stats-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .stats-card h3 {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-sm);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .stats-card p {
            font-size: 36px;
            font-weight: 700;
            line-height: 1;
        }

        .stats-card.primary {
            border-left-color: var(--primary-color);
        }

        .stats-card.primary p {
            color: var(--primary-color);
        }

        .stats-card.warning {
            border-left-color: var(--warning-color);
        }

        .stats-card.warning p {
            color: #e17055;
        }

        .stats-card.success {
            border-left-color: var(--success-color);
        }

        .stats-card.success p {
            color: var(--success-color);
        }

        .stats-card.info {
            border-left-color: var(--info-color);
        }

        .stats-card.info p {
            color: var(--info-color);
        }

        /* Patient List */
        .patient-list {
            list-style: none;
        }

        .patient-list-item {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: var(--border-radius-sm);
            margin-bottom: var(--spacing-xs);
        }

        .patient-list-item:hover {
            background: var(--primary-light);
            transform: translateX(4px);
        }

        .patient-list-item:active {
            background: #cce5ff;
        }

        .patient-info h3 {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .patient-info p {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Quick Select Buttons */
        .quick-select-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-sm);
            margin: var(--spacing-md) 0;
        }

        .quick-select-btn {
            min-height: 72px;
            padding: var(--spacing-md);
            font-size: 15px;
            font-weight: 600;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .quick-select-btn:hover {
            border-color: var(--primary-color);
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .quick-select-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
            box-shadow: var(--shadow-md);
        }

        /* Form Grid */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-lg);
        }

        .form-grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-lg);
        }

        .form-grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--spacing-lg);
        }

        /* Search Box */
        .search-box {
            position: relative;
            margin-bottom: var(--spacing-lg);
        }

        .search-box input {
            padding-left: 52px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .search-box input:focus {
            background: white;
            color: var(--text-primary);
            border-color: white;
        }

        .search-icon {
            position: absolute;
            left: var(--spacing-lg);
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .badge-primary {
            background: var(--primary-light);
            color: var(--primary-color);
        }

        .badge-success {
            background: #d1fae5;
            color: var(--success-color);
        }

        .badge-warning {
            background: #fef3c7;
            color: #e17055;
        }

        .badge-danger {
            background: #ffe5e5;
            color: var(--danger-color);
        }

        .badge-info {
            background: #e3f2fd;
            color: var(--info-color);
        }

        /* Medicine List */
        .medicine-item {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: var(--border-radius-sm);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
            border-left: 4px solid var(--primary-color);
            box-shadow: var(--shadow-sm);
        }

        .medicine-item h4 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            color: var(--text-primary);
        }

        .medicine-item p {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 4px 0;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 40px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border-color);
        }

        .timeline-item {
            position: relative;
            margin-bottom: var(--spacing-xl);
            padding: var(--spacing-lg);
            background: white;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--primary-color);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -29px;
            top: 24px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary-color);
            border: 3px solid white;
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        .timeline-date {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
            border-bottom: 2px solid var(--border-color);
        }

        .tab {
            padding: var(--spacing-md) var(--spacing-xl);
            font-size: 16px;
            font-weight: 600;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
        }

        .tab:hover {
            color: var(--primary-color);
            background: var(--primary-light);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Table */
        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background: var(--primary-light);
            padding: var(--spacing-md);
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 2px solid var(--primary-color);
        }

        .table td {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
        }

        .table tr:hover {
            background: var(--primary-light);
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .mb-3 {
            margin-bottom: var(--spacing-lg);
        }

        .mb-4 {
            margin-bottom: var(--spacing-xl);
        }

        .mt-3 {
            margin-top: var(--spacing-lg);
        }

        .mt-4 {
            margin-top: var(--spacing-xl);
        }

        .flex {
            display: flex;
        }

        .flex-between {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .gap-3 {
            gap: var(--spacing-lg);
        }

        .text-center {
            text-align: center;
        }

        /* Current Patient Card */
        #currentPatientCard {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }

        #currentPatientCard h3 {
            color: white;
        }

        #currentPatientInfo p {
            color: rgba(255, 255, 255, 0.9);
        }

        /* Billing Total Card */
        .billing-total {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            border: none;
            color: white;
            box-shadow: var(--shadow-lg);
        }

        .billing-total h3,
        .billing-total p {
            color: white;
        }

        /* Alert Box */
        .alert {
            padding: var(--spacing-lg);
            border-radius: var(--border-radius-sm);
            margin-bottom: var(--spacing-lg);
            border-left: 4px solid;
        }

        .alert-success {
            background: #d1fae5;
            border-left-color: var(--success-color);
            color: #065f46;
        }

        .alert-warning {
            background: #fef3c7;
            border-left-color: var(--warning-color);
            color: #92400e;
        }

        .alert-danger {
            background: #ffe5e5;
            border-left-color: var(--danger-color);
            color: #991b1b;
        }

        .alert-info {
            background: #e3f2fd;
            border-left-color: var(--info-color);
            color: #1e40af;
        }

        /* Lab Report Card */
        .lab-report-card {
            background: linear-gradient(135deg, #fff5f5 0%, #ffe5e5 100%);
            border-left-color: var(--danger-color);
        }

        .lab-report-card.normal {
            background: linear-gradient(135deg, #f0fdf4 0%, #d1fae5 100%);
            border-left-color: var(--success-color);
        }

        /* Appointment Card */
        .appointment-card {
            background: white;
            border-radius: var(--border-radius-sm);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--info-color);
            transition: all 0.3s ease;
        }

        .appointment-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateX(4px);
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: fadeIn 0.5s ease;
        }

        /* Responsive */
        @media (min-width: 1024px) and (max-width: 1366px) {
            .app-container {
                grid-template-columns: 340px 1fr;
            }
        }

        @media (min-width: 834px) and (max-width: 1194px) {
            .app-container {
                grid-template-columns: 300px 1fr;
            }
            
            .btn {
                font-size: 15px;
            }
            
            .input-field {
                font-size: 15px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-icon">‚öïÔ∏è</div>
                    <div>
                        <h1>MediCore Pro</h1>
                        <p>Dr. Prakash's Clinic</p>
                    </div>
                </div>
            </div>

            <div class="sidebar-content">
                <button class="btn btn-primary btn-block mb-3" onclick="showView('registration')">
                    ‚ûï New Patient
                </button>

                <button class="btn btn-outline btn-block mb-3" onclick="showView('dashboard')" style="background: rgba(255,255,255,0.1); color: white; border-color: rgba(255,255,255,0.3);">
                    üè† Dashboard
                </button>

                <button class="btn btn-outline btn-block mb-3" onclick="showView('appointments')" style="background: rgba(255,255,255,0.1); color: white; border-color: rgba(255,255,255,0.3);">
                    üìÖ Appointments
                </button>

                <button class="btn btn-outline btn-block mb-3" onclick="showView('inventory')" style="background: rgba(255,255,255,0.1); color: white; border-color: rgba(255,255,255,0.3);">
                    üì¶ Inventory
                </button>

                <button class="btn btn-outline btn-block mb-3" onclick="showView('reports')" style="background: rgba(255,255,255,0.1); color: white; border-color: rgba(255,255,255,0.3);">
                    üìä Reports
                </button>

                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input 
                        type="text" 
                        class="input-field" 
                        placeholder="Search patients..."
                        oninput="searchPatients(this.value)"
                    >
                </div>

                <div id="patientList"></div>

                <div id="currentPatientCard" class="card hidden">
                    <h3 style="font-size: 15px; font-weight: 700; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;">Current Patient</h3>
                    <div id="currentPatientInfo"></div>
                    <button class="btn btn-outline btn-block mt-3" onclick="showView('patientDetails')" style="background: rgba(255,255,255,0.1); color: white; border-color: rgba(255,255,255,0.3);">
                        üìã Full Profile
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard View -->
            <div id="dashboardView">
                <h2 class="card-header" style="background: white; padding: var(--spacing-xl); border-radius: var(--border-radius); box-shadow: var(--shadow-md); border: none;">
                    üìä Dashboard Overview
                </h2>
                
                <div class="stats-grid">
                    <div class="stats-card primary">
                        <h3>Today's Patients</h3>
                        <p id="todayPatientsCount">8</p>
                    </div>
                    <div class="stats-card warning">
                        <h3>Appointments</h3>
                        <p id="appointmentsCount">12</p>
                    </div>
                    <div class="stats-card success">
                        <h3>Collection</h3>
                        <p id="collectionAmount">‚Çπ4,500</p>
                    </div>
                    <div class="stats-card info">
                        <h3>Total Patients</h3>
                        <p id="totalPatientsCount">156</p>
                    </div>
                </div>

                <div class="form-grid mb-4">
                    <div class="card">
                        <h3 class="card-header">üìÖ Today's Appointments</h3>
                        <div id="todayAppointments"></div>
                    </div>

                    <div class="card">
                        <h3 class="card-header">‚ö†Ô∏è Critical Alerts</h3>
                        <div class="alert alert-danger">
                            <strong>Low Stock Alert:</strong> Paracetamol (50 tablets left)
                        </div>
                        <div class="alert alert-warning">
                            <strong>Follow-up Due:</strong> 3 patients need follow-up today
                        </div>
                        <div class="alert alert-info">
                            <strong>Lab Results:</strong> 2 lab reports pending review
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-header">üë• Recent Patients</h3>
                    <ul class="patient-list" id="recentPatientsList"></ul>
                </div>
            </div>

            <!-- Patient Registration View -->
            <div id="registrationView" class="hidden">
                <div class="card">
                    <h2 class="card-header">‚ûï New Patient Registration</h2>
                    
                    <form onsubmit="registerPatient(event)">
                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Patient Name *</label>
                                <input type="text" class="input-field" id="patientName" required placeholder="Enter full name">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Age *</label>
                                <input type="number" class="input-field" id="patientAge" required placeholder="Enter age" min="0" max="150">
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Gender *</label>
                                <select class="input-field" id="patientGender" required>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Phone Number *</label>
                                <input type="tel" class="input-field" id="patientPhone" required placeholder="10-digit mobile number" pattern="[0-9]{10}">
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Email Address</label>
                                <input type="email" class="input-field" id="patientEmail" placeholder="patient@example.com (optional)">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Blood Group</label>
                                <select class="input-field" id="patientBloodGroup">
                                    <option value="">Select Blood Group</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Address</label>
                            <textarea class="input-field" id="patientAddress" placeholder="Enter complete address (optional)" rows="2"></textarea>
                        </div>

                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Emergency Contact Name</label>
                                <input type="text" class="input-field" id="emergencyContactName" placeholder="Emergency contact person">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Emergency Contact Phone</label>
                                <input type="tel" class="input-field" id="emergencyContactPhone" placeholder="Emergency contact number">
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Known Allergies</label>
                            <textarea class="input-field" id="patientAllergies" placeholder="List any known allergies (optional)" rows="2"></textarea>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Chronic Conditions</label>
                            <textarea class="input-field" id="patientConditions" placeholder="List any chronic conditions (optional)" rows="2"></textarea>
                        </div>

                        <div class="flex gap-3 mt-4">
                            <button type="submit" class="btn btn-primary btn-block btn-lg">‚úÖ Register Patient</button>
                            <button type="button" class="btn btn-outline btn-lg" onclick="showView('dashboard')">‚ùå Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Patient Details View -->
            <div id="patientDetailsView" class="hidden">
                <div class="card">
                    <div class="flex-between mb-4">
                        <div id="patientDetailsHeader"></div>
                        <div class="flex gap-3">
                            <button class="btn btn-primary" onclick="showView('casesheet')">ü©∫ New Visit</button>
                            <button class="btn btn-info" onclick="showView('labOrders')">üß™ Order Lab Test</button>
                            <button class="btn btn-success" onclick="showView('imaging')">üì∑ Order Imaging</button>
                        </div>
                    </div>

                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('overview')">üìã Overview</button>
                        <button class="tab" onclick="switchTab('visits')">ü©∫ Visit History</button>
                        <button class="tab" onclick="switchTab('labs')">üß™ Lab Reports</button>
                        <button class="tab" onclick="switchTab('prescriptions')">üíä Prescriptions</button>
                        <button class="tab" onclick="switchTab('documents')">üìÑ Documents</button>
                    </div>

                    <div id="overviewTab" class="tab-content active">
                        <div class="form-grid mb-4">
                            <div class="card" style="background: var(--primary-light);">
                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">PATIENT INFORMATION</h4>
                                <div id="patientOverviewInfo"></div>
                            </div>
                            <div class="card" style="background: #fff5f5;">
                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">MEDICAL ALERTS</h4>
                                <div id="patientAlerts"></div>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-header">üìä Vital Trends (Last 6 Months)</h3>
                            <div style="padding: 40px; text-align: center; background: var(--bg-color); border-radius: var(--border-radius-sm);">
                                <p style="color: var(--text-secondary);">üìà Blood Pressure: 120/80 ‚Üí 125/82 ‚Üí 118/78 (Stable)</p>
                                <p style="color: var(--text-secondary);">üå°Ô∏è Temperature: Normal range maintained</p>
                                <p style="color: var(--text-secondary);">‚öñÔ∏è Weight: 72kg ‚Üí 70kg ‚Üí 69kg (Decreasing trend)</p>
                            </div>
                        </div>
                    </div>

                    <div id="visitsTab" class="tab-content">
                        <div class="timeline" id="visitTimeline"></div>
                    </div>

                    <div id="labsTab" class="tab-content">
                        <div id="labReportsList"></div>
                    </div>

                    <div id="prescriptionsTab" class="tab-content">
                        <div id="prescriptionsList"></div>
                    </div>

                    <div id="documentsTab" class="tab-content">
                        <button class="btn btn-primary mb-3">üì§ Upload Document</button>
                        <div id="documentsList"></div>
                    </div>
                </div>
            </div>

            <!-- Case Sheet View -->
            <div id="casesheetView" class="hidden">
                <div class="card">
                    <div class="flex-between mb-3">
                        <div id="casesheetPatientInfo"></div>
                        <span class="badge badge-success" style="font-size: 16px; padding: 10px 20px;">üÜï New Visit</span>
                    </div>

                    <form onsubmit="saveCaseSheet(event)">
                        <!-- Chief Complaints -->
                        <div class="input-group">
                            <label class="input-label">ü©∫ Chief Complaints *</label>
                            <div class="quick-select-grid" id="complaintsGrid"></div>
                            <input type="text" class="input-field mt-3" id="customComplaint" placeholder="Add custom complaint...">
                        </div>

                        <!-- Vitals -->
                        <div class="input-group">
                            <label class="input-label">üíì Vital Signs</label>
                            <div class="form-grid-4">
                                <input type="text" class="input-field" id="vitalBP" placeholder="BP (e.g., 120/80)">
                                <input type="text" class="input-field" id="vitalTemp" placeholder="Temp (¬∞F)">
                                <input type="text" class="input-field" id="vitalPulse" placeholder="Pulse (bpm)">
                                <input type="text" class="input-field" id="vitalSpO2" placeholder="SpO2 (%)">
                            </div>
                            <div class="form-grid-3 mt-3">
                                <input type="text" class="input-field" id="vitalWeight" placeholder="Weight (kg)">
                                <input type="text" class="input-field" id="vitalHeight" placeholder="Height (cm)">
                                <input type="text" class="input-field" id="vitalBMI" placeholder="BMI" readonly>
                            </div>
                        </div>

                        <!-- History -->
                        <div class="input-group">
                            <label class="input-label">üìù History of Present Illness</label>
                            <textarea class="input-field" id="history" rows="3" placeholder="Detailed history..."></textarea>
                        </div>

                        <!-- Past Medical History -->
                        <div class="input-group">
                            <label class="input-label">üìö Past Medical History</label>
                            <textarea class="input-field" id="pastHistory" rows="2" placeholder="Previous illnesses, surgeries, hospitalizations..."></textarea>
                        </div>

                        <!-- Examination -->
                        <div class="input-group">
                            <label class="input-label">üîç Physical Examination</label>
                            <textarea class="input-field" id="examination" rows="3" placeholder="Examination findings..."></textarea>
                        </div>

                        <!-- Diagnosis -->
                        <div class="input-group">
                            <label class="input-label">üéØ Diagnosis *</label>
                            <div class="quick-select-grid" id="diagnosisGrid"></div>
                            <input type="text" class="input-field mt-3" id="customDiagnosis" placeholder="Add custom diagnosis...">
                        </div>

                        <!-- Investigation Orders -->
                        <div class="input-group">
                            <label class="input-label">üß™ Investigation Orders</label>
                            <div class="quick-select-grid">
                                <button type="button" class="quick-select-btn" onclick="toggleInvestigation('CBC')">CBC</button>
                                <button type="button" class="quick-select-btn" onclick="toggleInvestigation('Blood Sugar')">Blood Sugar</button>
                                <button type="button" class="quick-select-btn" onclick="toggleInvestigation('Lipid Profile')">Lipid Profile</button>
                                <button type="button" class="quick-select-btn" onclick="toggleInvestigation('Liver Function')">Liver Function</button>
                                <button type="button" class="quick-select-btn" onclick="toggleInvestigation('Kidney Function')">Kidney Function</button>
                                <button type="button" class="quick-select-btn" onclick="toggleInvestigation('Urine Routine')">Urine Routine</button>
                                <button type="button" class="quick-select-btn" onclick="toggleInvestigation('X-Ray Chest')">X-Ray Chest</button>
                                <button type="button" class="quick-select-btn" onclick="toggleInvestigation('ECG')">ECG</button>
                                <button type="button" class="quick-select-btn" onclick="toggleInvestigation('Ultrasound')">Ultrasound</button>
                            </div>
                        </div>

                        <!-- Notes -->
                        <div class="input-group">
                            <label class="input-label">üìå Additional Notes</label>
                            <textarea class="input-field" id="notes" rows="2" placeholder="Any additional notes..."></textarea>
                        </div>

                        <!-- Follow-up Date -->
                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">üìÖ Follow-up Date</label>
                                <input type="date" class="input-field" id="followupDate">
                            </div>
                            <div class="input-group">
                                <label class="input-label">‚è∞ Follow-up Time</label>
                                <input type="time" class="input-field" id="followupTime">
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-block btn-lg mt-4">
                            ‚û°Ô∏è Save & Continue to Prescription
                        </button>
                    </form>
                </div>
            </div>

            <!-- Prescription View -->
            <div id="prescriptionView" class="hidden">
                <div class="card">
                    <h2 class="card-header">üíä E-Prescription</h2>

                    <div class="input-group">
                        <label class="input-label">Quick Select Medicines</label>
                        <div class="quick-select-grid" id="medicinesGrid"></div>
                    </div>

                    <button class="btn btn-outline btn-block mt-3" onclick="toggleCustomMedicine()">
                        ‚ûï Add Custom Medicine
                    </button>

                    <div id="customMedicineForm" class="card mt-3 hidden" style="background: var(--primary-light);">
                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Medicine Name</label>
                                <input type="text" class="input-field" id="customMedicineName" placeholder="Enter medicine name">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Dosage</label>
                                <input type="text" class="input-field" id="customMedicineDosage" placeholder="e.g., 500mg">
                            </div>
                        </div>
                        <div class="form-grid-3">
                            <div class="input-group">
                                <label class="input-label">Frequency</label>
                                <select class="input-field" id="customMedicineFrequency">
                                    <option value="">Select</option>
                                    <option value="OD">OD (Once daily)</option>
                                    <option value="BD">BD (Twice daily)</option>
                                    <option value="TDS">TDS (Three times)</option>
                                    <option value="QID">QID (Four times)</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Duration</label>
                                <select class="input-field" id="customMedicineDuration">
                                    <option value="">Select</option>
                                    <option value="3 days">3 days</option>
                                    <option value="5 days">5 days</option>
                                    <option value="7 days">7 days</option>
                                    <option value="10 days">10 days</option>
                                    <option value="15 days">15 days</option>
                                    <option value="30 days">30 days</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Instructions</label>
                                <select class="input-field" id="customMedicineInstructions">
                                    <option value="">Select</option>
                                    <option value="Before food">Before food</option>
                                    <option value="After food">After food</option>
                                    <option value="With food">With food</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn btn-primary btn-block mt-3" onclick="addCustomMedicine()">‚úÖ Add Medicine</button>
                    </div>

                    <div id="selectedMedicinesList" class="mt-4"></div>

                    <div class="flex gap-3 mt-4 hidden" id="prescriptionActions">
                        <button class="btn btn-success btn-block btn-lg" onclick="generatePrescription()">
                            üìÑ Generate PDF
                        </button>
                        <button class="btn btn-primary btn-lg" onclick="generatePrescription()">
                            üì± Send WhatsApp
                        </button>
                        <button class="btn btn-info btn-lg" onclick="generatePrescription()">
                            üìß Email
                        </button>
                    </div>
                </div>
            </div>

            <!-- Billing View -->
            <div id="billingView" class="hidden">
                <div class="card">
                    <h2 class="card-header">üí∞ Billing & Payment</h2>

                    <form onsubmit="saveBilling(event)">
                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Consultation Fee (‚Çπ)</label>
                                <input type="number" class="input-field" id="consultationFee" value="500" min="0" step="0.01" oninput="calculateTotal()">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Procedure Charges (‚Çπ)</label>
                                <input type="number" class="input-field" id="procedureCharges" value="0" min="0" step="0.01" oninput="calculateTotal()">
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Medicine Charges (‚Çπ)</label>
                                <input type="number" class="input-field" id="medicineCharges" value="0" min="0" step="0.01" oninput="calculateTotal()">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Lab Test Charges (‚Çπ)</label>
                                <input type="number" class="input-field" id="labCharges" value="0" min="0" step="0.01" oninput="calculateTotal()">
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Discount (%)</label>
                                <input type="number" class="input-field" id="discount" value="0" min="0" max="100" step="0.01" oninput="calculateTotal()">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Tax/GST (%)</label>
                                <input type="number" class="input-field" id="tax" value="0" min="0" max="100" step="0.01" oninput="calculateTotal()">
                            </div>
                        </div>

                        <div class="card mt-3 billing-total">
                            <div class="flex-between">
                                <h3 style="font-size: 22px; font-weight: 700;">Total Amount</h3>
                                <p style="font-size: 40px; font-weight: 700;" id="totalAmount">‚Çπ500.00</p>
                            </div>
                        </div>

                        <div class="form-grid mt-3">
                            <div class="input-group">
                                <label class="input-label">Payment Mode</label>
                                <select class="input-field" id="paymentMode">
                                    <option value="Cash">üíµ Cash</option>
                                    <option value="Card">üí≥ Card</option>
                                    <option value="UPI">üì± UPI</option>
                                    <option value="Net Banking">üè¶ Net Banking</option>
                                    <option value="Insurance">üè• Insurance</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Payment Status</label>
                                <select class="input-field" id="paymentStatus">
                                    <option value="Paid">‚úÖ Paid</option>
                                    <option value="Pending">‚è≥ Pending</option>
                                    <option value="Partial">‚ö†Ô∏è Partial</option>
                                </select>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Invoice Notes</label>
                            <textarea class="input-field" id="invoiceNotes" rows="2" placeholder="Additional notes for invoice..."></textarea>
                        </div>

                        <div class="flex gap-3 mt-4">
                            <button type="submit" class="btn btn-success btn-block btn-lg">‚úÖ Record Payment</button>
                            <button type="button" class="btn btn-primary btn-lg" onclick="printReceipt()">üñ®Ô∏è Print Receipt</button>
                            <button type="button" class="btn btn-info btn-lg" onclick="emailInvoice()">üìß Email Invoice</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Appointments View -->
            <div id="appointmentsView" class="hidden">
                <div class="card">
                    <div class="flex-between mb-4">
                        <h2 class="card-header" style="margin: 0; padding: 0; border: none;">üìÖ Appointment Management</h2>
                        <button class="btn btn-primary" onclick="showNewAppointmentForm()">‚ûï New Appointment</button>
                    </div>

                    <div id="newAppointmentForm" class="card hidden" style="background: var(--primary-light); margin-bottom: 24px;">
                        <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px;">Schedule New Appointment</h3>
                        <form onsubmit="scheduleAppointment(event)">
                            <div class="form-grid">
                                <div class="input-group">
                                    <label class="input-label">Patient</label>
                                    <select class="input-field" id="appointmentPatient" required>
                                        <option value="">Select Patient</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Appointment Type</label>
                                    <select class="input-field" id="appointmentType" required>
                                        <option value="Consultation">Consultation</option>
                                        <option value="Follow-up">Follow-up</option>
                                        <option value="Procedure">Procedure</option>
                                        <option value="Lab Test">Lab Test</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-grid">
                                <div class="input-group">
                                    <label class="input-label">Date</label>
                                    <input type="date" class="input-field" id="appointmentDate" required>
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Time</label>
                                    <input type="time" class="input-field" id="appointmentTime" required>
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Notes</label>
                                <textarea class="input-field" id="appointmentNotes" rows="2" placeholder="Appointment notes..."></textarea>
                            </div>
                            <div class="flex gap-3">
                                <button type="submit" class="btn btn-primary btn-block">‚úÖ Schedule</button>
                                <button type="button" class="btn btn-outline" onclick="hideNewAppointmentForm()">‚ùå Cancel</button>
                            </div>
                        </form>
                    </div>

                    <div class="tabs">
                        <button class="tab active" onclick="switchAppointmentTab('today')">Today</button>
                        <button class="tab" onclick="switchAppointmentTab('upcoming')">Upcoming</button>
                        <button class="tab" onclick="switchAppointmentTab('past')">Past</button>
                    </div>

                    <div id="todayAppointmentsTab" class="tab-content active">
                        <div id="todayAppointmentsList"></div>
                    </div>

                    <div id="upcomingAppointmentsTab" class="tab-content">
                        <div id="upcomingAppointmentsList"></div>
                    </div>

                    <div id="pastAppointmentsTab" class="tab-content">
                        <div id="pastAppointmentsList"></div>
                    </div>
                </div>
            </div>

            <!-- Inventory View -->
            <div id="inventoryView" class="hidden">
                <div class="card">
                    <div class="flex-between mb-4">
                        <h2 class="card-header" style="margin: 0; padding: 0; border: none;">üì¶ Inventory Management</h2>
                        <button class="btn btn-primary" onclick="showAddStockForm()">‚ûï Add Stock</button>
                    </div>

                    <div class="stats-grid mb-4">
                        <div class="stats-card success">
                            <h3>Total Items</h3>
                            <p>156</p>
                        </div>
                        <div class="stats-card warning">
                            <h3>Low Stock</h3>
                            <p>8</p>
                        </div>
                        <div class="stats-card danger">
                            <h3>Out of Stock</h3>
                            <p>3</p>
                        </div>
                        <div class="stats-card info">
                            <h3>Expiring Soon</h3>
                            <p>5</p>
                        </div>
                    </div>

                    <div class="card" style="background: var(--primary-light);">
                        <div class="input-group" style="margin: 0;">
                            <input type="text" class="input-field" placeholder="üîç Search medicines, supplies..." oninput="searchInventory(this.value)">
                        </div>
                    </div>

                    <div class="card">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Medicine Name</th>
                                    <th>Category</th>
                                    <th>Stock</th>
                                    <th>Expiry Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="inventoryTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reports View -->
            <div id="reportsView" class="hidden">
                <div class="card">
                    <h2 class="card-header">üìä Analytics & Reports</h2>

                    <div class="stats-grid mb-4">
                        <div class="stats-card primary">
                            <h3>This Month</h3>
                            <p>245 Patients</p>
                        </div>
                        <div class="stats-card success">
                            <h3>Revenue</h3>
                            <p>‚Çπ1,23,500</p>
                        </div>
                        <div class="stats-card info">
                            <h3>Avg. Per Patient</h3>
                            <p>‚Çπ504</p>
                        </div>
                        <div class="stats-card warning">
                            <h3>Pending Payments</h3>
                            <p>‚Çπ8,500</p>
                        </div>
                    </div>

                    <div class="form-grid mb-4">
                        <div class="card">
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px;">üìà Patient Growth</h3>
                            <div style="padding: 60px; text-align: center; background: var(--bg-color); border-radius: var(--border-radius-sm);">
                                <p style="color: var(--text-secondary);">Jan: 45 | Feb: 52 | Mar: 61 | Apr: 58 | May: 67 | Jun: 72</p>
                                <p style="color: var(--success-color); font-weight: 600; margin-top: 12px;">‚ÜóÔ∏è 60% growth this year</p>
                            </div>
                        </div>

                        <div class="card">
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px;">üí∞ Revenue Trend</h3>
                            <div style="padding: 60px; text-align: center; background: var(--bg-color); border-radius: var(--border-radius-sm);">
                                <p style="color: var(--text-secondary);">Jan: ‚Çπ22K | Feb: ‚Çπ26K | Mar: ‚Çπ31K | Apr: ‚Çπ29K | May: ‚Çπ34K | Jun: ‚Çπ36K</p>
                                <p style="color: var(--success-color); font-weight: 600; margin-top: 12px;">‚ÜóÔ∏è 64% revenue growth</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px;">üèÜ Top Diagnoses</h3>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Diagnosis</th>
                                    <th>Count</th>
                                    <th>Percentage</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Viral Fever</td>
                                    <td>45</td>
                                    <td><span class="badge badge-primary">18.4%</span></td>
                                </tr>
                                <tr>
                                    <td>Hypertension</td>
                                    <td>38</td>
                                    <td><span class="badge badge-warning">15.5%</span></td>
                                </tr>
                                <tr>
                                    <td>Diabetes</td>
                                    <td>32</td>
                                    <td><span class="badge badge-danger">13.1%</span></td>
                                </tr>
                                <tr>
                                    <td>Respiratory Infection</td>
                                    <td>28</td>
                                    <td><span class="badge badge-info">11.4%</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex gap-3 mt-4">
                        <button class="btn btn-primary btn-block">üì• Export Monthly Report</button>
                        <button class="btn btn-success btn-block">üìä Generate Custom Report</button>
                        <button class="btn btn-info btn-block">üìß Email Reports</button>
                    </div>
                </div>
            </div>

            <!-- Lab Orders View -->
            <div id="labOrdersView" class="hidden">
                <div class="card">
                    <h2 class="card-header">üß™ Lab Test Orders</h2>
                    <form onsubmit="orderLabTests(event)">
                        <div class="input-group">
                            <label class="input-label">Select Tests</label>
                            <div class="quick-select-grid">
                                <button type="button" class="quick-select-btn" onclick="toggleLabTest('CBC')">CBC</button>
                                <button type="button" class="quick-select-btn" onclick="toggleLabTest('Blood Sugar')">Blood Sugar</button>
                                <button type="button" class="quick-select-btn" onclick="toggleLabTest('Lipid Profile')">Lipid Profile</button>
                                <button type="button" class="quick-select-btn" onclick="toggleLabTest('Liver Function')">Liver Function</button>
                                <button type="button" class="quick-select-btn" onclick="toggleLabTest('Kidney Function')">Kidney Function</button>
                                <button type="button" class="quick-select-btn" onclick="toggleLabTest('Thyroid Profile')">Thyroid Profile</button>
                                <button type="button" class="quick-select-btn" onclick="toggleLabTest('Urine Routine')">Urine Routine</button>
                                <button type="button" class="quick-select-btn" onclick="toggleLabTest('HbA1c')">HbA1c</button>
                                <button type="button" class="quick-select-btn" onclick="toggleLabTest('Vitamin D')">Vitamin D</button>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Special Instructions</label>
                            <textarea class="input-field" id="labInstructions" rows="2" placeholder="Fasting required, specific timing, etc..."></textarea>
                        </div>

                        <div class="flex gap-3 mt-4">
                            <button type="submit" class="btn btn-primary btn-block btn-lg">‚úÖ Order Tests</button>
                            <button type="button" class="btn btn-outline btn-lg" onclick="showView('patientDetails')">‚ùå Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Imaging View -->
            <div id="imagingView" class="hidden">
                <div class="card">
                    <h2 class="card-header">üì∑ Imaging Orders</h2>
                    <form onsubmit="orderImaging(event)">
                        <div class="input-group">
                            <label class="input-label">Select Imaging</label>
                            <div class="quick-select-grid">
                                <button type="button" class="quick-select-btn" onclick="toggleImaging('X-Ray Chest')">X-Ray Chest</button>
                                <button type="button" class="quick-select-btn" onclick="toggleImaging('X-Ray Abdomen')">X-Ray Abdomen</button>
                                <button type="button" class="quick-select-btn" onclick="toggleImaging('Ultrasound')">Ultrasound</button>
                                <button type="button" class="quick-select-btn" onclick="toggleImaging('CT Scan')">CT Scan</button>
                                <button type="button" class="quick-select-btn" onclick="toggleImaging('MRI')">MRI</button>
                                <button type="button" class="quick-select-btn" onclick="toggleImaging('ECG')">ECG</button>
                                <button type="button" class="quick-select-btn" onclick="toggleImaging('Echo')">Echo</button>
                                <button type="button" class="quick-select-btn" onclick="toggleImaging('Mammography')">Mammography</button>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Clinical Indication</label>
                            <textarea class="input-field" id="imagingIndication" rows="3" placeholder="Reason for imaging, clinical details..." required></textarea>
                        </div>

                        <div class="flex gap-3 mt-4">
                            <button type="submit" class="btn btn-primary btn-block btn-lg">‚úÖ Order Imaging</button>
                            <button type="button" class="btn btn-outline btn-lg" onclick="showView('patientDetails')">‚ùå Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample Data Storage
        let patients = [
            { id: 1, code: 'P000001', name: 'Ramesh Kumar', age: 45, gender: 'Male', phone: '9876543210', email: 'ramesh@example.com', bloodGroup: 'B+', allergies: 'Penicillin', conditions: 'Hypertension' },
            { id: 2, code: 'P000002', name: 'Priya Sharma', age: 32, gender: 'Female', phone: '9876543211', email: 'priya@example.com', bloodGroup: 'A+', allergies: 'None', conditions: 'None' },
            { id: 3, code: 'P000003', name: 'Suresh Patil', age: 58, gender: 'Male', phone: '9876543212', email: 'suresh@example.com', bloodGroup: 'O+', allergies: 'Sulfa drugs', conditions: 'Diabetes, CKD' }
        ];

        let visits = [];
        let appointments = [];
        let inventory = [
            { id: 1, name: 'Paracetamol 500mg', category: 'Analgesic', stock: 50, expiry: '2025-12-31', status: 'Low Stock' },
            { id: 2, name: 'Amoxicillin 500mg', category: 'Antibiotic', stock: 120, expiry: '2026-03-15', status: 'In Stock' },
            { id: 3, name: 'Metformin 500mg', category: 'Antidiabetic', stock: 200, expiry: '2026-06-30', status: 'In Stock' },
            { id: 4, name: 'Amlodipine 5mg', category: 'Antihypertensive', stock: 0, expiry: '2025-09-20', status: 'Out of Stock' },
            { id: 5, name: 'Omeprazole 20mg', category: 'Antacid', stock: 85, expiry: '2025-11-10', status: 'In Stock' }
        ];

        let currentPatient = null;
        let currentVisit = null;
        let selectedComplaints = [];
        let selectedDiagnoses = [];
        let selectedMedicines = [];
        let selectedInvestigations = [];
        let selectedLabTests = [];
        let selectedImaging = [];

        const complaints = ['Fever', 'Cough', 'Breathless', 'Joint pains', 'Abdominal pain', 'General weakness', 'Headache', 'Chest pain', 'Nausea'];
        const diagnoses = ['Viral fever', 'Diabetes', 'Hypertension', 'CKD', 'URTI', 'Gastritis', 'Arthritis', 'Migraine'];
        const medicines = [
            { name: 'Crocin', dosage: '500mg', frequency: 'TDS', duration: '3 days', instructions: 'After food' },
            { name: 'Voveran', dosage: '50mg', frequency: 'BD', duration: '5 days', instructions: 'After food' },
            { name: 'Glykind-M', dosage: '500mg', frequency: 'BD', duration: '30 days', instructions: 'Before food' },
            { name: 'Cap Omez', dosage: '20mg', frequency: 'OD', duration: '7 days', instructions: 'Before food' },
            { name: 'Becasule', dosage: '1 cap', frequency: 'OD', duration: '30 days', instructions: 'After food' },
            { name: 'Azithromycin', dosage: '500mg', frequency: 'OD', duration: '5 days', instructions: 'After food' }
        ];

        window.onload = function() {
            renderDashboard();
            renderPatientList();
            renderComplaintsGrid();
            renderDiagnosisGrid();
            renderMedicinesGrid();
            renderInventoryTable();
            renderTodayAppointments();
        };

        function showView(viewName) {
            const views = ['dashboard', 'registration', 'patientDetails', 'casesheet', 'prescription', 'billing', 'appointments', 'inventory', 'reports', 'labOrders', 'imaging'];
            views.forEach(view => {
                const element = document.getElementById(view + 'View');
                if (element) element.classList.add('hidden');
            });
            const targetView = document.getElementById(viewName + 'View');
            if (targetView) targetView.classList.remove('hidden');
        }

        function renderDashboard() {
            document.getElementById('todayPatientsCount').textContent = '8';
            document.getElementById('appointmentsCount').textContent = '12';
            document.getElementById('collectionAmount').textContent = '‚Çπ4,500';
            document.getElementById('totalPatientsCount').textContent = patients.length;

            const recentList = document.getElementById('recentPatientsList');
            recentList.innerHTML = patients.map(p => `
                <li class="patient-list-item" onclick="selectPatient(${p.id})">
                    <div class="patient-info">
                        <h3>${p.name}</h3>
                        <p>${p.age} years ‚Ä¢ ${p.gender} ‚Ä¢ ${p.phone}</p>
                    </div>
                    <span class="badge badge-primary">${p.code}</span>
                </li>
            `).join('');

            // Today's appointments
            const todayAppts = document.getElementById('todayAppointments');
            todayAppts.innerHTML = `
                <div class="appointment-card">
                    <div class="flex-between">
                        <div>
                            <h4 style="font-weight: 600; margin-bottom: 4px;">Ramesh Kumar</h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">10:00 AM - Follow-up</p>
                        </div>
                        <span class="badge badge-success">Confirmed</span>
                    </div>
                </div>
                <div class="appointment-card">
                    <div class="flex-between">
                        <div>
                            <h4 style="font-weight: 600; margin-bottom: 4px;">Priya Sharma</h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">11:30 AM - Consultation</p>
                        </div>
                        <span class="badge badge-warning">Pending</span>
                    </div>
                </div>
            `;
        }

        function renderPatientList() {
            const list = document.getElementById('patientList');
            list.innerHTML = `
                <ul class="patient-list">
                    ${patients.slice(0, 5).map(p => `
                        <li class="patient-list-item" onclick="selectPatient(${p.id})">
                            <div class="patient-info">
                                <h3>${p.name}</h3>
                                <p>${p.age}y ‚Ä¢ ${p.gender}</p>
                            </div>
                        </li>
                    `).join('')}
                </ul>
            `;
        }

        function searchPatients(query) {
            if (query.length < 2) {
                renderPatientList();
                return;
            }

            const filtered = patients.filter(p => 
                p.name.toLowerCase().includes(query.toLowerCase()) ||
                p.phone.includes(query) ||
                p.code.includes(query)
            );

            const list = document.getElementById('patientList');
            list.innerHTML = `
                <ul class="patient-list">
                    ${filtered.map(p => `
                        <li class="patient-list-item" onclick="selectPatient(${p.id})">
                            <div class="patient-info">
                                <h3>${p.name}</h3>
                                <p>${p.age}y ‚Ä¢ ${p.gender} ‚Ä¢ ${p.phone}</p>
                            </div>
                            <span class="badge badge-primary">${p.code}</span>
                        </li>
                    `).join('')}
                </ul>
            `;
        }

        function selectPatient(patientId) {
            currentPatient = patients.find(p => p.id === patientId);
            
            document.getElementById('currentPatientCard').classList.remove('hidden');
            document.getElementById('currentPatientInfo').innerHTML = `
                <p style="font-size: 18px; font-weight: 700;">${currentPatient.name}</p>
                <p style="font-size: 14px;">${currentPatient.age} years ‚Ä¢ ${currentPatient.gender}</p>
                <p style="font-size: 14px;">${currentPatient.phone}</p>
            `;

            document.getElementById('casesheetPatientInfo').innerHTML = `
                <div>
                    <h2 style="font-size: 26px; font-weight: 700; margin-bottom: 4px;">${currentPatient.name}</h2>
                    <p style="color: var(--text-secondary); font-size: 16px;">${currentPatient.age} years ‚Ä¢ ${currentPatient.gender} ‚Ä¢ ${currentPatient.code}</p>
                </div>
            `;

            renderPatientDetails();
            showView('patientDetails');
        }

        function renderPatientDetails() {
            document.getElementById('patientDetailsHeader').innerHTML = `
                <div>
                    <h2 style="font-size: 28px; font-weight: 700; margin-bottom: 4px;">${currentPatient.name}</h2>
                    <p style="color: var(--text-secondary); font-size: 16px;">${currentPatient.code} ‚Ä¢ ${currentPatient.age} years ‚Ä¢ ${currentPatient.gender}</p>
                </div>
            `;

            document.getElementById('patientOverviewInfo').innerHTML = `
                <p style="margin-bottom: 8px;"><strong>Phone:</strong> ${currentPatient.phone}</p>
                <p style="margin-bottom: 8px;"><strong>Email:</strong> ${currentPatient.email}</p>
                <p style="margin-bottom: 8px;"><strong>Blood Group:</strong> ${currentPatient.bloodGroup}</p>
            `;

            document.getElementById('patientAlerts').innerHTML = `
                <p style="margin-bottom: 8px;"><strong>üö® Allergies:</strong> ${currentPatient.allergies}</p>
                <p style="margin-bottom: 8px;"><strong>‚öïÔ∏è Conditions:</strong> ${currentPatient.conditions}</p>
            `;

            // Visit timeline
            document.getElementById('visitTimeline').innerHTML = `
                <div class="timeline-item">
                    <div class="timeline-date">Nov 25, 2024 - 10:30 AM</div>
                    <h4 style="font-weight: 600; margin-bottom: 8px;">Follow-up Visit</h4>
                    <p style="color: var(--text-secondary); margin-bottom: 8px;"><strong>Complaints:</strong> Fever, Cough</p>
                    <p style="color: var(--text-secondary); margin-bottom: 8px;"><strong>Diagnosis:</strong> Viral fever</p>
                    <p style="color: var(--text-secondary);"><strong>Prescription:</strong> Crocin 500mg TDS x 3 days</p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Nov 10, 2024 - 2:15 PM</div>
                    <h4 style="font-weight: 600; margin-bottom: 8px;">Regular Checkup</h4>
                    <p style="color: var(--text-secondary); margin-bottom: 8px;"><strong>Complaints:</strong> Routine checkup</p>
                    <p style="color: var(--text-secondary); margin-bottom: 8px;"><strong>Diagnosis:</strong> Hypertension (controlled)</p>
                    <p style="color: var(--text-secondary);"><strong>Prescription:</strong> Amlodipine 5mg OD x 30 days</p>
                </div>
            `;

            // Lab reports
            document.getElementById('labReportsList').innerHTML = `
                <div class="medicine-item lab-report-card normal">
                    <div class="flex-between mb-3">
                        <h4>Complete Blood Count (CBC)</h4>
                        <span class="badge badge-success">Normal</span>
                    </div>
                    <p><strong>Date:</strong> Nov 20, 2024</p>
                    <p><strong>Hemoglobin:</strong> 14.2 g/dL (Normal: 13-17)</p>
                    <p><strong>WBC:</strong> 7,500 /ŒºL (Normal: 4,000-11,000)</p>
                    <button class="btn btn-primary btn-sm mt-3">üìÑ View Full Report</button>
                </div>
                <div class="medicine-item lab-report-card">
                    <div class="flex-between mb-3">
                        <h4>Blood Sugar (Fasting)</h4>
                        <span class="badge badge-warning">High</span>
                    </div>
                    <p><strong>Date:</strong> Nov 15, 2024</p>
                    <p><strong>Glucose:</strong> 126 mg/dL (Normal: 70-100)</p>
                    <button class="btn btn-primary btn-sm mt-3">üìÑ View Full Report</button>
                </div>
            `;

            // Prescriptions
            document.getElementById('prescriptionsList').innerHTML = `
                <div class="medicine-item">
                    <div class="flex-between mb-3">
                        <h4>Prescription - Nov 25, 2024</h4>
                        <button class="btn btn-primary btn-sm">üìÑ View PDF</button>
                    </div>
                    <p><strong>1.</strong> Crocin 500mg - TDS x 3 days (After food)</p>
                    <p><strong>2.</strong> Voveran 50mg - BD x 5 days (After food)</p>
                </div>
            `;

            // Documents
            document.getElementById('documentsList').innerHTML = `
                <div class="medicine-item">
                    <div class="flex-between">
                        <div>
                            <h4>X-Ray Chest PA View</h4>
                            <p>Uploaded: Nov 20, 2024</p>
                        </div>
                        <button class="btn btn-primary btn-sm">üëÅÔ∏è View</button>
                    </div>
                </div>
            `;
        }

        function switchTab(tabName) {
            const tabs = ['overview', 'visits', 'labs', 'prescriptions', 'documents'];
            tabs.forEach(tab => {
                document.getElementById(tab + 'Tab').classList.remove('active');
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            });
            document.getElementById(tabName + 'Tab').classList.add('active');
            event.target.classList.add('active');
        }

        function registerPatient(event) {
            event.preventDefault();

            const newPatient = {
                id: patients.length + 1,
                code: `P${String(patients.length + 1).padStart(6, '0')}`,
                name: document.getElementById('patientName').value,
                age: parseInt(document.getElementById('patientAge').value),
                gender: document.getElementById('patientGender').value,
                phone: document.getElementById('patientPhone').value,
                email: document.getElementById('patientEmail').value,
                bloodGroup: document.getElementById('patientBloodGroup').value,
                allergies: document.getElementById('patientAllergies').value || 'None',
                conditions: document.getElementById('patientConditions').value || 'None'
            };

            patients.push(newPatient);
            alert('‚úÖ Patient registered successfully!\n\nPatient ID: ' + newPatient.code);
            
            selectPatient(newPatient.id);
            event.target.reset();
        }

        function renderComplaintsGrid() {
            const grid = document.getElementById('complaintsGrid');
            grid.innerHTML = complaints.map(c => `
                <button type="button" class="quick-select-btn" onclick="toggleComplaint('${c}')">
                    ${c}
                </button>
            `).join('');
        }

        function toggleComplaint(complaint) {
            const index = selectedComplaints.indexOf(complaint);
            if (index > -1) {
                selectedComplaints.splice(index, 1);
            } else {
                selectedComplaints.push(complaint);
            }
            updateComplaintsUI();
        }

        function updateComplaintsUI() {
            complaints.forEach(c => {
                const btn = Array.from(document.querySelectorAll('#complaintsGrid button')).find(b => b.textContent.trim() === c);
                if (btn) {
                    if (selectedComplaints.includes(c)) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                }
            });
        }

        function renderDiagnosisGrid() {
            const grid = document.getElementById('diagnosisGrid');
            grid.innerHTML = diagnoses.map(d => `
                <button type="button" class="quick-select-btn" onclick="toggleDiagnosis('${d}')">
                    ${d}
                </button>
            `).join('');
        }

        function toggleDiagnosis(diagnosis) {
            const index = selectedDiagnoses.indexOf(diagnosis);
            if (index > -1) {
                selectedDiagnoses.splice(index, 1);
            } else {
                selectedDiagnoses.push(diagnosis);
            }
            updateDiagnosisUI();
        }

        function updateDiagnosisUI() {
            diagnoses.forEach(d => {
                const btn = Array.from(document.querySelectorAll('#diagnosisGrid button')).find(b => b.textContent.trim() === d);
                if (btn) {
                    if (selectedDiagnoses.includes(d)) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                }
            });
        }

        function toggleInvestigation(investigation) {
            const index = selectedInvestigations.indexOf(investigation);
            if (index > -1) {
                selectedInvestigations.splice(index, 1);
            } else {
                selectedInvestigations.push(investigation);
            }
        }

        function saveCaseSheet(event) {
            event.preventDefault();

            if (selectedComplaints.length === 0 || selectedDiagnoses.length === 0) {
                alert('‚ö†Ô∏è Please select at least one complaint and diagnosis');
                return;
            }

            currentVisit = {
                id: visits.length + 1,
                patientId: currentPatient.id,
                date: new Date(),
                complaints: [...selectedComplaints],
                vitals: {
                    bp: document.getElementById('vitalBP').value,
                    temp: document.getElementById('vitalTemp').value,
                    pulse: document.getElementById('vitalPulse').value,
                    spo2: document.getElementById('vitalSpO2').value,
                    weight: document.getElementById('vitalWeight').value,
                    height: document.getElementById('vitalHeight').value
                },
                history: document.getElementById('history').value,
                pastHistory: document.getElementById('pastHistory').value,
                examination: document.getElementById('examination').value,
                diagnosis: [...selectedDiagnoses],
                investigations: [...selectedInvestigations],
                notes: document.getElementById('notes').value,
                followupDate: document.getElementById('followupDate').value,
                followupTime: document.getElementById('followupTime').value
            };

            visits.push(currentVisit);
            alert('‚úÖ Case sheet saved successfully!');
            showView('prescription');
        }

        function renderMedicinesGrid() {
            const grid = document.getElementById('medicinesGrid');
            grid.innerHTML = medicines.map((m, i) => `
                <button type="button" class="quick-select-btn" onclick="addMedicine(${i})" style="text-align: left; flex-direction: column; align-items: flex-start; justify-content: center;">
                    <div style="font-weight: 700; margin-bottom: 4px;">${m.name}</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">${m.dosage} ‚Ä¢ ${m.frequency}</div>
                </button>
            `).join('');
        }

        function addMedicine(index) {
            selectedMedicines.push({...medicines[index]});
            renderSelectedMedicines();
        }

        function toggleCustomMedicine() {
            const form = document.getElementById('customMedicineForm');
            form.classList.toggle('hidden');
        }

        function addCustomMedicine() {
            const name = document.getElementById('customMedicineName').value;
            const dosage = document.getElementById('customMedicineDosage').value;
            const frequency = document.getElementById('customMedicineFrequency').value;
            const duration = document.getElementById('customMedicineDuration').value;
            const instructions = document.getElementById('customMedicineInstructions').value;

            if (!name || !dosage) {
                alert('‚ö†Ô∏è Please enter medicine name and dosage');
                return;
            }

            selectedMedicines.push({ name, dosage, frequency, duration, instructions });
            renderSelectedMedicines();
            
            document.getElementById('customMedicineName').value = '';
            document.getElementById('customMedicineDosage').value = '';
            document.getElementById('customMedicineFrequency').value = '';
            document.getElementById('customMedicineDuration').value = '';
            document.getElementById('customMedicineInstructions').value = '';
            toggleCustomMedicine();
        }

        function renderSelectedMedicines() {
            const list = document.getElementById('selectedMedicinesList');
            
            if (selectedMedicines.length === 0) {
                list.innerHTML = '';
                document.getElementById('prescriptionActions').classList.add('hidden');
                return;
            }

            document.getElementById('prescriptionActions').classList.remove('hidden');

            list.innerHTML = `
                <h3 class="input-label" style="font-size: 18px; margin-bottom: 16px;">
                    üíä Prescription (${selectedMedicines.length} medicines)
                </h3>
                ${selectedMedicines.map((m, i) => `
                    <div class="medicine-item">
                        <div class="flex-between mb-3">
                            <h4>${i + 1}. ${m.name}</h4>
                            <button class="btn btn-danger btn-sm" onclick="removeMedicine(${i})">
                                ‚ùå Remove
                            </button>
                        </div>
                        <p><strong>Dosage:</strong> ${m.dosage} | <strong>Frequency:</strong> ${m.frequency}</p>
                        <p><strong>Duration:</strong> ${m.duration} | <strong>Instructions:</strong> ${m.instructions}</p>
                    </div>
                `).join('')}
            `;
        }

        function removeMedicine(index) {
            selectedMedicines.splice(index, 1);
            renderSelectedMedicines();
        }

        function generatePrescription() {
            if (selectedMedicines.length === 0) {
                alert('‚ö†Ô∏è Please add at least one medicine');
                return;
            }

            alert('‚úÖ Prescription generated successfully!\n\nüìÑ PDF generated\nüì± WhatsApp message sent\nüìß Email sent');
            showView('billing');
        }

        function calculateTotal() {
            const consultation = parseFloat(document.getElementById('consultationFee').value) || 0;
            const procedure = parseFloat(document.getElementById('procedureCharges').value) || 0;
            const medicine = parseFloat(document.getElementById('medicineCharges').value) || 0;
            const lab = parseFloat(document.getElementById('labCharges').value) || 0;
            const discount = parseFloat(document.getElementById('discount').value) || 0;
            const tax = parseFloat(document.getElementById('tax').value) || 0;
            
            const subtotal = consultation + procedure + medicine + lab;
            const discountAmount = (subtotal * discount) / 100;
            const afterDiscount = subtotal - discountAmount;
            const taxAmount = (afterDiscount * tax) / 100;
            const total = afterDiscount + taxAmount;
            
            document.getElementById('totalAmount').textContent = `‚Çπ${total.toFixed(2)}`;
        }

        function saveBilling(event) {
            event.preventDefault();
            alert('‚úÖ Payment recorded successfully!\n\nüéâ Visit completed!\nüìß Invoice emailed to patient');
            
            currentPatient = null;
            currentVisit = null;
            selectedComplaints = [];
            selectedDiagnoses = [];
            selectedMedicines = [];
            selectedInvestigations = [];
            
            showView('dashboard');
            renderDashboard();
        }

        function printReceipt() {
            alert('üñ®Ô∏è Printing receipt...\n\nPDF receipt will be generated.');
        }

        function emailInvoice() {
            alert('üìß Emailing invoice...\n\nInvoice sent to patient email.');
        }

        function renderInventoryTable() {
            const tbody = document.getElementById('inventoryTableBody');
            tbody.innerHTML = inventory.map(item => `
                <tr>
                    <td><strong>${item.name}</strong></td>
                    <td>${item.category}</td>
                    <td>${item.stock}</td>
                    <td>${item.expiry}</td>
                    <td>
                        ${item.status === 'In Stock' ? '<span class="badge badge-success">In Stock</span>' : ''}
                        ${item.status === 'Low Stock' ? '<span class="badge badge-warning">Low Stock</span>' : ''}
                        ${item.status === 'Out of Stock' ? '<span class="badge badge-danger">Out of Stock</span>' : ''}
                    </td>
                    <td>
                        <button class="btn btn-primary btn-sm">‚úèÔ∏è Edit</button>
                    </td>
                </tr>
            `).join('');
        }

        function searchInventory(query) {
            // Implement inventory search
        }

        function showAddStockForm() {
            alert('üì¶ Add Stock form will open here');
        }

        function renderTodayAppointments() {
            const list = document.getElementById('todayAppointmentsList');
            list.innerHTML = `
                <div class="appointment-card">
                    <div class="flex-between mb-3">
                        <div>
                            <h4 style="font-weight: 600; margin-bottom: 4px;">Ramesh Kumar</h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">10:00 AM - Follow-up</p>
                        </div>
                        <span class="badge badge-success">Confirmed</span>
                    </div>
                    <div class="flex gap-3">
                        <button class="btn btn-primary btn-sm">‚úÖ Check In</button>
                        <button class="btn btn-warning btn-sm">üìû Call</button>
                        <button class="btn btn-danger btn-sm">‚ùå Cancel</button>
                    </div>
                </div>
                <div class="appointment-card">
                    <div class="flex-between mb-3">
                        <div>
                            <h4 style="font-weight: 600; margin-bottom: 4px;">Priya Sharma</h4>
                            <p style="font-size: 14px; color: var(--text-secondary);">11:30 AM - Consultation</p>
                        </div>
                        <span class="badge badge-warning">Pending</span>
                    </div>
                    <div class="flex gap-3">
                        <button class="btn btn-primary btn-sm">‚úÖ Check In</button>
                        <button class="btn btn-warning btn-sm">üìû Call</button>
                        <button class="btn btn-danger btn-sm">‚ùå Cancel</button>
                    </div>
                </div>
            `;
        }

        function showNewAppointmentForm() {
            document.getElementById('newAppointmentForm').classList.remove('hidden');
            
            // Populate patient dropdown
            const select = document.getElementById('appointmentPatient');
            select.innerHTML = '<option value="">Select Patient</option>' + 
                patients.map(p => `<option value="${p.id}">${p.name} (${p.code})</option>`).join('');
        }

        function hideNewAppointmentForm() {
            document.getElementById('newAppointmentForm').classList.add('hidden');
        }

        function scheduleAppointment(event) {
            event.preventDefault();
            alert('‚úÖ Appointment scheduled successfully!\n\nüìß Confirmation sent to patient');
            hideNewAppointmentForm();
            renderTodayAppointments();
        }

        function switchAppointmentTab(tabName) {
            const tabs = ['today', 'upcoming', 'past'];
            tabs.forEach(tab => {
                document.getElementById(tab + 'AppointmentsTab').classList.remove('active');
            });
            document.getElementById(tabName + 'AppointmentsTab').classList.add('active');
        }

        function toggleLabTest(test) {
            const index = selectedLabTests.indexOf(test);
            if (index > -1) {
                selectedLabTests.splice(index, 1);
            } else {
                selectedLabTests.push(test);
            }
        }

        function orderLabTests(event) {
            event.preventDefault();
            if (selectedLabTests.length === 0) {
                alert('‚ö†Ô∏è Please select at least one test');
                return;
            }
            alert('‚úÖ Lab tests ordered successfully!\n\nTests: ' + selectedLabTests.join(', '));
            selectedLabTests = [];
            showView('patientDetails');
        }

        function toggleImaging(imaging) {
            const index = selectedImaging.indexOf(imaging);
            if (index > -1) {
                selectedImaging.splice(index, 1);
            } else {
                selectedImaging.push(imaging);
            }
        }

        function orderImaging(event) {
            event.preventDefault();
            if (selectedImaging.length === 0) {
                alert('‚ö†Ô∏è Please select at least one imaging test');
                return;
            }
            alert('‚úÖ Imaging ordered successfully!\n\nImaging: ' + selectedImaging.join(', '));
            selectedImaging = [];
            showView('patientDetails');
        }
    </script>
</body>
</html>